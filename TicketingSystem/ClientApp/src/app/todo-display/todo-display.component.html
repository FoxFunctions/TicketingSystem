<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<input type="text" placeholder="Search tickets by title" [(ngModel)]="searchTerm" (keyup)="searchTicketsByTitle(searchTerm)">
<br>

<p *ngIf="currentUser === ''">
    <input type="text" [(ngModel)]="userID" placeholder="Username">
    <br>

    <button class="buttonStyle" (click)="ticketService.login(userID); ngOnInit();">Login</button>
    <br>
</p>


<span *ngIf="currentUser !== ''">
    Logged in as: {{currentUser}}
    <button class="buttonStyle" (click)="ticketService.logout(); ngOnInit()">Logout</button>    
    <br>

    Show only favorites: <input type="checkbox" id="favSearchCheckBox" (click)="searchTicketsByTitle(searchTerm)">
    <br>
</span> Show only open tickets: <input type="checkbox" id="openStatusSearchCheckBox" (click)="searchTicketsByTitle(searchTerm)">
<p></p>

<div *ngFor="let ticket of searchedTickets">

    <div class="w3-card-4">

        <header class="w3-container w3-light-grey">
        <h3>{{ticket.id}} - {{ticket.title}}</h3>
        </header>
        
        <div class="w3-container">
            <p>
                <br> Issue: {{ticket.problemDescription}}
                <br> Opened by: {{ticket.openedUserId}} -
                <span *ngIf="ticket.isOpen">
                    Open ticket
                </span>
                <span *ngIf="!ticket.isOpen"> Resolved By: {{ticket.resolvedUserId}}</span>
            </p>
            <button class="buttonStyle" (click)="getTicket(ticket)" ng-click="grabbedTicket">View Ticket</button>
            <button class="buttonStyle" *ngIf="currentUser !== '' && !isFavorited(ticket.id)" (click)="createFavorite(ticket.id)">Favorite</button>
            <button class="buttonStyle" *ngIf="currentUser !== '' && isFavorited(ticket.id)" (click)="deleteFavorite(ticket.id)">Remove from favorites</button>
            <p></p>
        </div>
    </div>
    
</div>